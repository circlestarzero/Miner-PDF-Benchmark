# 浅谈 2017 年 CMO 第六题 

吴茁

(北京大学数学学院, 100871)

2017 年 CMO 的第 6 题可叙述为:

给定 $n, k \in \mathbb{N}^{*}(n>k), a_{1}, a_{2}, \cdots, a_{n} \in(k-1, k)$. 若正实数 $x_{1}, x_{2}, \cdots, x_{n}$满足: 对任意集合 $I \subset\{1,2, \cdots, n\},|I|=k$, 有 $\sum_{i \in I} x_{i} \leq \sum_{i \in I} a_{i}$, 求 $x_{1} x_{2} \cdots x_{n}$ 的最大值.

我们认为这是一个形式比较新颖, 不偏不怪, 难度中等的代数问题. 这道代数题计算量不大, 主要考察学生的各种代数思想和一些基本功.

这个问题拿到手, 我们先来研究条件. 虽然这是一个条件族极值问题, 但是本质上这个问题其实是一个不等式, 因为最值情形非常好猜, 就是 $x_{i}=a_{i}$ 的情况. 稍微取一些简单情况也容易验证, 比如 $k=1$ 的情况, 很明显正确; 而且如果这个不对似乎本题的最值情况也就会很奇怪, 所以我们有理由相信这的确是最值情形.

关于这个题我们有两种入手途径: 一种是变为条件极值问题来做, 另一种是变成不等式来做. 一般来说这两种方案区别不大, 但是在本题中, 变成不等式之后你可以处理右端, 也就是处理 $a_{i}$ : 本题有一个 $a_{i}$ 的大小限制关系, 如果我们单纯的化为条件极值问题, 就难以放缩 $a_{i}$, 因此变成不等式更加容易处理. 也即, 我们希望证明 $x_{1} x_{2} \ldots x_{n} \leq a_{1} \ldots . . a_{n}$.

接下来我们研究条件族. 这是一族条件, 看起来不容易处理; 因此我们需要简化条件族. 对于不等式形的条件族, 通过设出序关系可以把一些复杂的条件族简化为一个条件和一些序关系, 这更加容易处理. 本题的条件说, 任意取 $\{1,2, \ldots, n\}$ 的一个子集 $I$ 有

$$
\sum_{i \in I} x_{i} \leq \sum_{i \in I} a_{i}, \quad \text { 也即 } \sum_{i \in I}\left(a_{i}-x_{i}\right) \geq 0 \text {. }
$$

收稿日期: 2017-11-18; 修订日期: 2017-11-27.
因此, 我们可以设 $a_{i}=x_{i}+b_{i}$ 并假设 $b_{1} \leq b_{2} \leq \ldots \leq b_{n}$, 条件族即是 $b_{1}+\ldots+b_{k} \geq 0$ 和 $a_{i}>b_{i}$. 注意, 这是等价变形, 我们没有减弱原题条件. 这个很重要, 不等式里面做变形简化要尽量先做等价的, 否则可能放过.

现在我们要证明的式子也就变成了

$$
\prod_{i=1}^{n}\left(a_{i}-b_{i}\right) \leq \prod_{i=1}^{n} a_{i}
$$

这样做的好处就是解放了关于 $a_{i}$ 和 $x_{i}$ 的条件族, 化为关于 $b_{i}$ 的. 因此我们现在可以对 $a_{i}$ 进行放缩了. 除过去, 等式两端的 $a_{i}$ 变成一个, 就可以进行放缩.那么, 我们要证明的不等式就变成

$$
\prod_{i=1}^{n}\left(1-\frac{b_{i}}{a_{i}}\right) \leq 1
$$

那么我们来放左边. 放 $a_{i}$ 的时候涉及 $b_{i}$ 的正负性：因此我们可以不妨设 $b_{l}<0 \leq b_{l+1}$. 这里要注意: $b_{i}$ 如果全是非负的不等式已经成立, 而条件保证了 $l \leq k-1$. 所以 $l$ 的范围可以假设为 $1 \leq l \leq k-1$. 那么

$$
\prod_{i=1}^{n}\left(1-\frac{b_{i}}{a_{i}}\right) \leq \prod_{i=1}^{l}\left(1-\frac{b_{i}}{k-1}\right) \prod_{i=l+1}^{n}\left(1-\frac{b_{i}}{k}\right) .
$$

这样待证式子化为

$$
\prod_{i=1}^{l}\left(1-\frac{b_{i}}{k-1}\right) \prod_{i=l+1}^{n}\left(1-\frac{b_{i}}{k}\right) \leq 1
$$

我们继续来看. 这一步也是没有放缩过头的. 如果这个不等式存在反例,我们可以取 $a_{i}$ 充分接近 $k-1$ 或 $k$, 这样原不等式就不对. 还有一个点, 我们将 $a_{i}$ 放小的那些 $i$ 中 $b_{i}$ 是负的, 所以条件 $a_{i}>b_{i}$ 也没有被加强. 一定要留心这些点. 条件族 $a_{i}>b_{i}$ 这个时候就化为 $b_{i}<k$. 接下来我们继续处理原题,由于负的东西不太好处理, 我们假设 $c_{i}=-b_{i}(i=1,2, \ldots, l)$, 那么原题条件即 $c_{1}+\ldots .+c_{l} \leq b_{l+1}+\ldots .+b_{k}$. 不等式化为

$$
\prod_{i=1}^{l}\left(1+\frac{c_{i}}{k-1}\right) \prod_{i=l+1}^{n}\left(1-\frac{b_{i}}{k}\right) \leq 1
$$

我们来研究这个式子左边. 左边有三块: $c_{i}, b_{i}(l+1 \leq i \leq k), b_{i}(k+1 \leq n)$.这三种中第三种最好处理：第三种至少有一个, 我们也可以放成一个 (也就是 $n=k+1$ 的情况): 这样放自然不会过. 对于 $b_{k+1}$, 其下界只有一个序条件约束,那我们就直接放成 $b_{k}$. 这也不会放过. (注意: 这其实是对于第三种的 $b_{i}$ 用条件极值的思想.) 不等式此时化为

$$
\prod_{i=1}^{l}\left(1+\frac{c_{i}}{k-1}\right) \prod_{i=l+1}^{k}\left(1-\frac{b_{i}}{k}\right)\left(1-\frac{b_{k}}{k}\right) \leq 1
$$

现记 $b_{l+1}+\ldots+b_{k}=t$, 则 $c_{1}+\ldots .+c_{l} \leq t$. 引入参量 $t$ 后, $c_{i}$ 和 $b_{i}$ 再无任
何约束关系, 由于 $c_{i}$ 地位的对称性 $c_{i}$ 之间的序关系也相当于没有了. 那么研究 $c_{i}$ 时相当于研究一个关于 $c_{i}$ 的条件极值问题. 这不困难, 相等的时候左边关于 $c_{i}$ 的部分取最大值, 利用均值不等式就可以做掉. 那么不等式化为

$$
\left(1+\frac{t}{l(k-1)}\right)^{l} \prod_{i=l+1}^{k}\left(1-\frac{b_{i}}{k}\right)\left(1-\frac{b_{k}}{k}\right) \leq 1 .
$$

我们接着看 $b_{i}$. 注意:条件告诉我们 $b_{i}<k$. 左边关于 $b_{i}$ 的部分都是正的, 所以前面一个连乘式子在 $b_{i}$ 均相等的时候最大 (均值不等式), 而后面一个单项的 $k-l$ 次幂是小于等于前面一个连乘式的, 也就一起放掉; 这个在 $b_{i}$ 均相等的时候能取到等号. 到现在为止, 我们仍然能确认每一步都没有放过而这个题已经变成了一个关于 $k, t, l$ 的三元不等式. 此时不等式化为

$$
\left(1+\frac{t}{l(k-1)}\right)^{l}\left(1-\frac{t}{k(k-l)}\right)^{k-l+1} \leq 1 .
$$

这个不等式直接均值就可以了. 另一种更加朴实的办法是求导导出单调性.考虑到左边 $t$ 的部分比较简单, 我们视左边为 $f(t)$ 来研究 $f(t)$ 的最大值, 这可用求导来处理. 为了方便求导, 两边取对数后不等式化为

$$
l \ln \left(1+\frac{t}{l(k-1)}\right)+(k-l+1) \ln \left(1-\frac{t}{k(k-l)}\right) \leq 0 .
$$

记上式左边为 $f(t)$, 计算得

$$
f^{\prime}(t)=\frac{1}{k-1}-\frac{k-l+1}{k(k-l)}=\frac{1-l}{k(k-1)(k-l)} \leq 0 .
$$

那么 $f(t) \leq f(0)=0$. 这样就完成了整个解题过程.

评注 上面的解答虽然朴实, 但是其中体现了大量的代数中的思想. 现在我们来重新回顾一下它们.

## 1. 把原题从条件极值问题转为不等式.

本质上来说, 条件极值问题就是一个不等式和一个构造, 而不等式也可以移项变为条件极值问题, 它们是相辅相成的. 但是一般这两种问题的处理手法又有一些许不同: 不等式不一定能取等, 可能出现化为条件极值问题后条件极值不一定好求但是不等式并不难证的情况; 不等式更加方便进行代数变形, 往往进行整体处理，而条件极值问题的手法往往更偏向于调整或者求导，对变元个体进行处理; 不等式可以进行一些放缩, 这些放缩有时候可以大大简化式子, 但是一不小心就会放过, 而条件极值的问题的处理手法往往更加谨慎. 一种比较好的思考方式是把条件极值问题化为不等式, 在不等式证明中蕴含条件极值问题的思想.

## 2. 把条件族通过序关系化为一个条件和序关系.

设出序关系是不等式的常见办法, 虽然往往这样做会丧失不等式本身的对称性, 但是添加的序关系有时帮助我们简化条件或者可以将问题看得更清楚.在本题中序关系简化条件族为一个条件, 立马大大简化了条件.

## 3. 正负分离.

正负分离就是代数中非常常见的处理手段了, 本题的正负分离帮我们放掉了 $a_{i}$, 进而可以进行后续处理. 正负分离问题往往在条件族为和为 0 这样的有正有负的条件族中使用, 通过对负的作换元可以把不等式化为全非负数的不等式, 这也是我们平常熟悉处理的不等式.

## 4. 利用“等价性”思想，逐步简化.

我们在前面的评注中多次指出这个题我们的放缩是不会过或者说是等价的, 这也是我们放不等式首先应该优先考虑的放缩. 利用 “等价性” 思想, 我们逐步逐步简化问题, 先简化条件族, 再简化 $a_{i}$, 再换元简化条件族, 然后分成三段, 分别处理, 最后化为三元不等式, 再求导来放缩, 步步简化, 化归问题. 值得我们注意.

