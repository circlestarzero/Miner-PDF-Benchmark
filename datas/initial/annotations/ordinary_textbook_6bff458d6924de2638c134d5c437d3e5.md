数学新星网 $\%$ 教师专栏

www.nsmath.cn/jszl

# 第 60 届国际数学奥林匹克 

䨉振华

(华东师范大学数学系, 200241)

英国 巴斯

第一天

7 月 16 日 8:30-13:00

1. 用 $\mathbb{Z}$ 表示全体整数构成的集合. 求所有函数 $f: \mathbb{Z} \rightarrow \mathbb{Z}$, 满足对任意整数 $a$ 和 $b$, 都有

$$
f(2 a)+2 f(b)=f(f(a+b)) \text {. }
$$

(南非 供题)

解 将题中等式记为 $P(a, b)$. 由 $P(0, x)$ 得

$$
f(0)+2 f(x)=f(f(x)) .
$$

由 $P(x, 0)$ 得

$$
f(2 x)+2 f(0)=f(f(x)) .
$$

比较 (1) 和 (2) 可得

$$
f(2 x)=2 f(x)-f(0) .
$$

将 (1) 和 (3) 代入原式, 我们有

$$
2 f(a)-f(0)+2 f(b)=f(0)+2 f(a+b) .
$$

令 $g(x)=f(x)-f(0)$, 则 $g(0)=0$, 并且 (4) 可以写为

$$
g(a+b)=g(a)+g(b) .
$$

由柯西方法可知, 对任意整数 $n$, 都有 $g(n)=g(1) n$. 从而 $f$ 形如 $f(x)=k x+c$,[^0]其中 $k, c \in \mathbb{Z}$. 代入原式中, 要求对所有整数 $a, b$ 有

$$
2 k(a+b)+3 c=k^{2}(a+b)+(k+1) c .
$$

这当且仅当 $2 k=k^{2}$, 且 $3 c=(k+1) c$. 从而 $k=2$ 或 0 . 若 $k=2$, 则 $c$ 可为任意整数; 若 $k=0$, 则 $c=0$.

因此满足条件的函数为 $f(x)=0$, 或 $f(x)=2 x+c, c$ 是任意整数.

评注 本题在代入简单数值后, 即可将方程转化为柯西方程, 作为第一题是一道非常基础的函数方程问题.

2. 在三角形 $A B C$ 中, 点 $A_{1}$ 在边 $B C$ 上, 点 $B_{1}$ 在边 $A C$ 上. 点 $P$ 和 $Q$ 分别在线段 $A A_{1}$ 和 $B B_{1}$ 上, 且满足 $P Q$ 平行于 $A B$. 在直线 $P B_{1}$ 上取点 $P_{1}$, 使得点 $B_{1}$ 严格位于点 $P$ 与点 $P_{1}$ 之间, 并且 $\angle P P_{1} C=\angle B A C$. 类似地, 在直线 $Q A_{1}$上取点 $Q_{1}$, 使得点 $A_{1}$ 严格位于点 $Q$ 与点 $Q_{1}$ 之间, 并且 $\angle C Q_{1} Q=\angle C B A$. 证明: 点 $P, Q, P_{1}, Q_{1}$ 共圆.

(乌克兰 供题)

证明 如图所示, 射线 $A A_{1}, B B_{1}$ 分别与三角形 $A B C$ 的外接圆相交于点 $A_{2}, B_{2}$. 由于 $P Q / / A B$, 故 $\angle A_{2} B_{2} B=\angle A_{2} A B=\angle A_{2} P Q$, 从而 $A_{2}, B_{2}, P, Q$共圆. 又

$$
\angle C A_{2} A=\angle C B A=\angle C Q_{1} Q=\angle C Q_{1} A_{1},
$$

故 $C, A_{1}, A_{2}, Q_{1}$ 共圆. 于是

$$
\angle A_{2} Q_{1} Q=\angle A_{2} Q_{1} A_{1}=\angle A_{2} C A_{1}=\angle A_{2} C B=\angle A_{2} A B=\angle A_{2} P Q \text {, }
$$

故 $Q_{1}, A_{2}, Q, P$ 共圆. 类似可证, $P_{1}, B_{2}, P, Q$ 共圆, 从而 $P_{1}, Q_{1}, P, Q, A_{2}, B_{2}$ 六点共圆, 结论获证.

![](https://cdn.mathpix.com/cropped/2024_02_26_2c15d7958aa9b5ced2beg-2.jpg?height=591&width=485&top_left_y=2026&top_left_x=791)
评注 本题解答看似简单, 实则并不算容易, 点 $A_{2}, B_{2}$ 不很明显会去添出,也有其他方法可做. 考试结果表明这是一道中等难度的平面几何问题, 很多国家做得不好。

3. 一个社交网络上有 2019 个用户, 某些用户之间是朋友关系. 只要用户 $A$是用户 $B$ 的朋友, 则用户 $B$ 也是用户 $A$ 的朋友. 如下形式的操作可反复进行,每一时刻只进行一个操作:

三个用户 $A, B$ 和 $C$, 满足 $A$ 与 $B, C$ 都是朋友, 但 $B$ 和 $C$ 不是朋友, 则同时改变他们之间的朋友关系, 即 $B$ 和 $C$ 变为朋友, 但 $A$ 与 $B$ 不再是朋友, $A$ 与 $C$也不再是朋友. 所有其他的朋友关系不改变.

已知最初时有 1010 个用户每人拥有 1009 个朋友, 有 1009 个用户每人拥有 1010 个月朋友. 证明: 存在一个操作序列, 使得操作结束后, 每个用户至多只有一个朋友。

(克罗地亚 供题)

证明 用图论的语言来描述这个问题: 有一个 2019 阶简单图, 其中 1010 个顶点的度为 1009, 1009 个顶点的度为 1010. 允许进行如下操作, 如果有三个顶点 $A, B, C$ 满足 $A B, A C$ 是边, 而 $B C$ 不是边, 则可删去边 $A B, A C$, 添上边 $B C$.要证明, 存在一个操作序列, 使得操作结束后, 这个图变为若干条不相邻的边,以及一些孤立顶点.

由于 $G$ 中任意两个顶点 $u, v$ 的度之和不小于 2018 , 要么 $u, v$ 相邻, 要么 $u, v$有公共的邻点, 因此 $G$ 是连通的, 且 $G$ 显然不是完全图, 并且有顶点的度为奇数. 事实上, 结论对一个连通的非完全图, 且有顶点的度为奇数的图都成立. 下面仅假设 $G$ 是这样一个图.

第一步: 若 $G$ 不是树, 则可通过若干次操作, 使得图变为树. 注意到操作不改变一个顶点的度的奇偶性, 因此有度为奇数的顶点这一性质始终保持. 只需说明若不是树, 可通过一次操作使得图仍是连通的, 这样由于每次操作减少一条边, 必定在有限次操作后该图变为树.

取 $G$ 中的最大圈 $x_{1}, x_{2}, \cdots, x_{k}, x_{1}$. 若这个圈不是 Hamilton 圈, 则存在一个顶点, 不妨设是 $x_{1}$, 它与不在该圈上的某个顶点 $y$ 相邻, 于是 $y$ 不与 $x_{2}$ 相邻,否则就有更大的圈 $x_{1}, y, x_{2}, \cdots, x_{k}, x_{1}$. 删去边 $x_{1} y, x_{1} x_{2}$, 添上边 $y x_{2}$ 后, 得到的图仍是连通的.

若这个圈是 Hamilton 圈, 由于有奇数度的顶点, 因此整个图不能只是这
个圈, 也不是完全图, 因此存在一条弦, 不妨设 $x_{1} x_{i}$, 满足 $x_{1}, x_{i+1}$ 不相邻, 或者 $x_{1}, x_{i-1}$ 不相邻. 不妨设 $x_{1}, x_{i+1}$ 不相邻, 那么可以删去 $x_{1} x_{i}, x_{i} x_{i+1}$, 添上边 $x_{1} x_{i+1}$, 得到的图仍是连通的.

第二步: 若 $G$ 是树, 则可通过若干次操作, 使得图变为若干条不相邻的边,以及一些孤立顶点. 如果 $G$ 只有一个或两个顶点, 结论已经成立. 假设 $G$ 至少含有三个顶点, 则存在一个顶点 $u$, 度至少是 2 , 设 $u v, u w$ 是 $u$ 处的两条边,则 $v, w$ 不相邻, 删去边 $u v, u w$ (此时变为三个连通分支), 再添上边 $v w$, 此时图有两个连通分支, 并且每个连通分支仍是树. 对至少含有三个顶点的连通分支再作同样的操作, 直至每个连通分支都含有一个或两个顶点, 这便是我们所需的结果.

评注 本题主要思想是逐步地化简这个图, 以达到最后的目标. 主要的困难之处在于总结出可做如此化简的充分必要条件, 即每个大于 2 阶的连通分支不是完全图, 并且含有奇度顶点. 有了这样的认识之后, 可以想到多种化简手段.题目的条件隐藏了这个条件, 增加了问题的难度. 本题是一个较难的算法型组合问题.

$$
\text { 第二天 }
$$

$$
7 \text { 月 } 17 \text { 日 } 8: 30-13: 00
$$

4. 求所有正整数对 $(k, n)$, 满足

$$
k !=\left(2^{n}-1\right)\left(2^{n}-2\right)\left(2^{n}-4\right) \cdots\left(2^{n}-2^{n-1}\right) .
$$

(萨尔瓦多供题)

解 记等式右边为 $R_{n}$, 则

$$
v_{2}\left(R_{n}\right)=\sum_{i=0}^{n-1} v_{2}\left(2^{n}-2^{i}\right)=\sum_{i=0}^{n-1} i=\frac{1}{2}(n-1) n .
$$

而熟知 $v_{2}(k !)=k-S_{2}(k)$, 其中 $S_{2}(k)$ 表示 $k$ 在二进制表示下的数码和, 故

$$
k-S_{2}(k)=\frac{1}{2}(n-1) n
$$

从而 $k=\frac{1}{2}(n-1) n+S_{2}(k) \geq \frac{1}{2}(n-1) n+1$.

直接检验 $n=1,2,3,4$, 可得两组解 $(k, n)=(1,1),(3,2)$. 对 $n \geq 5$, 我们证明

$$
\left(\frac{1}{2}(n-1) n+1\right) !>2^{n^{2}},
$$

而 $R_{n} \leq\left(2^{n}\right)^{n}=2^{n^{2}}$, 从而 $k !>R_{n}, n \geq 5$ 时不存在满足要求的正整数对 $(k, n)$. $n=5$ 时, 直接验证 (1) 式, $11 !=39,916,800>2^{25}=33,554,432$. 对 $n>5$,

$$
\begin{aligned}
\left(\frac{1}{2}(n-1) n+1\right) ! & =11 ! \cdot \prod_{i=12}^{\frac{1}{2}(n-1) n+1} i>2^{25} \cdot 8^{\frac{1}{2}(n-1) n-10} \\
& =2^{25+\frac{3}{2}(n-1) n-15} \geq 2^{\frac{3}{2}(n-1) n} \geq 2^{n^{2}}
\end{aligned}
$$

综上, 所有满足条件的正整数对 $(k, n)$ 为 $(1,1)$ 和 $(3,2)$.

评注 利用 $v_{2}$ 估计出 $k$ 的下界, 再利用不等式放缩证明 $n$ 较大时均不成立.本题是很常规的数论问题, 作为第二天的第一题, 也是比较好上手的.

5. 巴斯银行发行的硬币在一面上铸有 $H$, 在另一面上铸有 $T$. 哈利有 $n$ 枚这样的硬币并将这些硬币从左至右排成一行。他反复地进行如下操作: 如果恰有 $k(>0)$ 枚硬币 $H$ 面朝上, 则他将从左至右的第 $k$ 枚硬币翻转; 如果所有硬币都是 $T$ 面朝上, 则停止操作. 例如: 当 $n=3$, 并且初始状态是 $T H T$, 则操作过程为 $T H T \rightarrow H H T \rightarrow H T T \rightarrow T T T$, 总共进行了三次操作后停止.

(a) 证明: 对每个初始状态, 哈利总在有限次操作后停止.

(b) 对每个初始状态 $C$, 记 $L(C)$ 为哈利从初始状态 $C$ 开始至停止操作时的操作次数, 例如 $L(T H T)=3, L(T T T)=0$. 求 $C$ 取遍所有 $2^{n}$ 个可能的初始状态时得到的 $L(C)$ 的平均值.

证明 设 $V_{n}=\{H, T\}^{n}$, 是所有长度为 $n$ 的 $H-T$ 序列构成的集合, 即所有 $2^{n}$ 种硬币序列的状态. 对 $n$ 归纳证明：对任意 $C \in V_{n}, L(C)$ 有限, 且

$$
\sum_{C \in V_{n}} L(C)=2^{n-2} n(n+1)
$$

$$
\begin{aligned}
& n=1 \text { 时, } V_{1}=\{H, T\}, L(H)=1, L(T)=0 . \\
& n=2 \text { 时, } V_{2}=\{H H, H T, T H, T T\}, L(H H)=2, L(H T)=1, L(T H)=3,
\end{aligned}
$$

$L(T T)=0$, 结论在 $n=1,2$ 时均成立.

假设 $n \geq 3$, 且结论在 $n$ 较小时均成立. 对两个 $H-T$ 序列 $A, B$, 用 $A \cdot B$表示将 $A, B$ 按顺序拼接在一起得到的 $H-T$ 序列. 令

$$
\begin{gathered}
X=\left\{C \cdot T \mid C \in V_{n-1}\right\}, \quad Y=\left\{H \cdot C \mid C \in V_{n-1}\right\} \\
Z=\left\{T \cdot C \cdot H \mid C \in V_{n-2}\right\}, \quad W=\left\{H \cdot C \cdot T \mid C \in V_{n-2}\right\}
\end{gathered}
$$

显然 $V_{n}=X \cup Y \cup Z, X \cap Y=W$.
对 $C \cdot T \in X$, 由于最后一位始终是 $T$, 操作过程就如同只对 $C$ 进行操作,因此操作 $L(C)$ 次后全变为 $T$, 故 $L(C \cdot T)=L(C)$.

对 $H \cdot C \in Y$, 设 $C$ 中恰有 $k$ 个 $H$, 则 $H \cdot C$ 中恰有 $k+1$ 个 $H$, 而 $H \cdot C$的第 $k+1$ 位恰是 $C$ 中的第 $k$ 位, 因此一开始的操作就如同只对 $C$ 进行操作,操作 $L(C)$ 次后变为 $H T T \cdots T$, 再进行一次操作后全变为 $T$, 故 $L(H \cdot C)=$ $L(C)+1$.

对 $T \cdot C \cdot H \in Z$, 设 $C$ 中恰有 $k$ 个 $H$, 则 $T \cdot C \cdot H$ 中恰有 $k+1$ 个 $H$,而 $T \cdot C \cdot H$ 的第 $k+1$ 位恰是 $C$ 中的第 $k$ 位, 因此一开始的操作就如同只对 $C$ 进行操作, 在进行了 $L(C)$ 次操作后变为 $T T \cdots T H$, 此后依次将第 $1,2, \cdots, n-1$ 个 $T$ 变为 $H$, 再依次将第 $n, n-1, \cdots, 1$ 个 $H$ 变为 $T$, 操作停止, 因此 $L(T \cdot C \cdot H)=L(C)+2 n-1$.

对 $H \cdot C \cdot T \in W$, 由前两种情形的讨论, 我们有

$$
L(H \cdot C \cdot T)=L(H \cdot C)=L(C)+1 .
$$

至此, 已经证明了对每个 $C \in V_{n}, L(C)$ 是有限的. 最后, 利用归纳假设可得

$$
\begin{aligned}
& \sum_{C \in V_{n}} L(C) \\
= & \sum_{C \cdot T \in X} L(C \cdot T)+\sum_{H \cdot C \in Y} L(H \cdot C)+\sum_{T \cdot C \cdot H \in Z} L(T \cdot C \cdot H)-\sum_{H \cdot C \cdot T \in W} L(H \cdot C \cdot T) \\
= & \sum_{C \in V_{n-1}} L(C)+\sum_{C \in V_{n-1}}(L(C)+1)+\sum_{C \in V_{n-2}}(L(C)+2 n-1)-\sum_{C \in V_{n-2}}(L(C)+1) \\
= & 2 \sum_{C \in V_{n-1}} L(C)+2^{n-1}+(2 n-2) 2^{n-2} \\
= & 2 \cdot 2^{n-3}(n-1) n+2 n \cdot 2^{n-2} \\
= & 2^{n-2} n(n+1) .
\end{aligned}
$$

因此, 所有 $L(C)$ 的平均值为 $\frac{1}{4} n(n+1)$.

评注 本题有多种解法, 这里采用了递推方法, 分几类来递推地给出 $L(C)$的值. 还可以对每个 $C$, 由 $H$ 的位置, 给出 $L(C)$ 的具体表达式, 再进行计算. 本题作为第五题, 是偏容易的组合题, 通过尝试操作过程, 很容易找到规律.

6. 在锐角三角形 $A B C$ 中, $I$ 是内心, $A B \neq A C$. 三角形 $A B C$ 的内切圆 $\omega$与边 $B C, C A$ 和 $A B$ 分别相切于点 $D, E$ 和 $F$. 过点 $D$ 且垂直于 $E F$ 的直线与 $\omega$ 的另一点交点为 $R$. 直线 $A R$ 与 $\omega$ 的另一交点为 $P$. 三角形 $P C E$ 和三角形 $P B F$ 的外接圆交于另一点 $Q$. 证明: 直线 $D I$ 和 $P Q$ 的交点在过点 $A$ 且垂
直于 $A I$ 的直线上.

(印度 供题)

证明 如图 1 所示, 设 $D I$ 与 $\angle B A C$ 的外角平分线交于点 $L$, 于是 $A L \perp A I$.只需再证明 $L, Q, P$ 共线. 设 $D L$ 与 $\omega$ 的另一个交点为 $K, E F$ 的中点为 $N$.

![](https://cdn.mathpix.com/cropped/2024_02_26_2c15d7958aa9b5ced2beg-7.jpg?height=683&width=696&top_left_y=561&top_left_x=680)

图 1

(i) $K, N, P$ 共线. 由于 $R F P E$ 是调和四边形, 由调和四边形的性质可知 $E F$ 平分 $\angle R N P$. 又

$$
\frac{1}{2} \overparen{K F}+\frac{1}{2} \overparen{F D}=90^{\circ}=\frac{1}{2} \overparen{R E}+\frac{1}{2} \overparen{F D}
$$

故 $\widehat{K F}=\widehat{R E}$, 即 $K, R$ 关于 $A I$ 对称, 因此 $\angle K N F=\angle R N E=\angle P N E$,故 $K, N, P$ 共线.

(ii) $L, S, P$ 共线. 由于 $A$ 是 $N$ 关于 $\omega$ 的反演点, $L A \perp A I$, 故直线 $A L$是 $N$ 关于 $\omega$ 的极线. 设 $P S$ 于 $D K$ 交于点 $L^{\prime}$, 则 $L^{\prime}$ 的极线经过 $N, N$ 的极线经过 $L^{\prime}$, 故 $L^{\prime}$ 在直线 $A L$ 上, 于是 $L^{\prime}=L$, 故 $L, S, P$ 共线.

只需证 $S, Q, P$ 共线. 如图 2 所示. 我们采用有向角的记号, 使得角度上的叙述不依赖于特定的图形, 用 $\angle(a, b)$ 表示由直线 $a$ 逆时针旋转至直线 $b$ 的方向时所转过的角度, 在有向角的等式中, 都按模 $\pi$ 理解. 由于 $B, F, Q, P$ 共圆, $C, E, Q, P$ 共圆, 故

$$
\begin{aligned}
& \angle(B Q, Q C)=\angle(B Q, Q P)+\angle(P Q, Q C)=\angle(B F, F P)+\angle(P E, E C) \\
& =\angle(E F, E P)+\angle(F P, F E)=\angle(F P, E P)=\angle(D F, D E)=\angle(B I, I C)
\end{aligned}
$$

从而 $B, I, Q, C$ 共圆. 设直线 $Q P$ 与 $\odot(B I Q C)$ 交于另一点 $T$, 直线 $I T$ 与 $D S$交于点 $M$.

![](https://cdn.mathpix.com/cropped/2024_02_26_2c15d7958aa9b5ced2beg-8.jpg?height=856&width=648&top_left_y=203&top_left_x=704)

图 2

(iii) $M$ 是 $D N$ 的中点. 注意到

$$
\angle(B I, I T)=\angle(B Q, Q T)=\angle(B F, F P)=\angle(F K, K P)
$$

且由于 $F D \perp F K, F D \perp B I$, 故 $F K / / B I$, 因此 $I T / / K N P$. 又 $I$ 是 $D K$ 的中点, 因此 $M$ 是 $D N$ 的中点.

现在我们来证明 $S, P, T$ 共线, 这将完成整个问题的证明. 如图 3 所示.设 $D F, D E$ 的中点分别为 $F_{1}, E_{1}$. 由于

$$
D F_{1} \cdot F_{1} F=D F_{1}^{2}=B F_{1} \cdot F_{1} I,
$$

故 $F_{1}$ 在 $\omega$ 与 $\odot(B I C)$ 的根轴上. 类似地, $E_{1}$ 也在 $\omega$ 与 $\odot(B I C)$ 的根轴上, 因此直线 $E_{1} F_{1}$ 就是 $\omega$ 与 $\odot(B I C)$ 的根轴, 由于 $M$ 是 $D N$ 的中点, 故 $M$ 在 $E_{1} F_{1}$上, 从而 $M$ 对 $\omega$ 与 $\odot(B I C)$ 等幂. 从而

$$
D M \cdot M S=I M \cdot M T
$$

这表明 $S, I, D, T$ 共圆. 于是

$$
\angle(D S, S T)=\angle(D I, I T)=\angle(D K, K P)=\angle(D S, S P) \text {, }
$$

故 $S, P, T$ 共线.

评注 这里给出的是官方证明, 过程曲折, 在一定程度上误导了各国领队对于这个题的难度判断. 原本认为是极难的题, 考试结果却表明是一个正常可做的几何难题. 事实上, 此题解法甚多, 有些想法比较直接, 协调员又给出了 5 种

![](https://cdn.mathpix.com/cropped/2024_02_26_2c15d7958aa9b5ced2beg-9.jpg?height=742&width=633&top_left_y=203&top_left_x=720)

图 3

不同的证明, 中国队员有五人证出, 方法又各不同. 更多解法的总结, 可参见即将出版的《走向 IMO, 2019》.


[^0]:    收稿日期: 2019-07-23.

