# 第 11 届罗马尼亚大师杯数学竞赛 

翟振华

(华东师范大学, 200241)

第 1 题 甲乙两人玩如下的游戏: 甲先在黑板上写一个正整数. 接着甲乙两人轮流操作, 乙先操作. 每次轮到乙操作, 乙选择一个正整数 $b$, 将黑板上的数 $n$ 替换为 $n-b^{2}$. 每次轮到甲操作，甲选择一个正整数 $k$, 将黑板上的数 $n$ 替换为 $n^{k}$. 如果黑板上出现了数 0 , 则乙获胜. 问甲是否可以阻止乙获胜?

解法一 (葛程) 甲不能阻止乙获胜, 不论甲一开始在黑板上写什么数, 乙总有策略取胜.

对正整数 $n$, 可唯一地表示为 $n=x y^{2}$, 其中 $x, y$ 是正整数, 且 $x$ 不含平方因子. 记 $f(n)=x$, 称为 $n$ 的无平方因子核.

轮到乙操作, 若黑板上的数 $n$ 是完全平方数, 则乙可以选择 $b$, 使得 $n-b^{2}=0$, 此时乙获胜. 若 $n$ 不是完全平方数, 设 $n=x y^{2}$, 其中 $x$ 不含平方因子, 乙取 $b=y$, 则 $n-b^{2}=(x-1) y^{2}$, 此时 $f\left(n-b^{2}\right)=f(x-1)<x$, 即乙可以使得黑板上的数的无平方因子核减小.

轮到甲操作时, 甲无法使得黑板上的数的无平方因子核变大. 事实上, 若甲取奇数 $k$, 则 $f\left(n^{k}\right)=f(n)$; 若甲取偶数 $k$, 则 $f\left(n^{k}\right)=1 \leq f(n)$.

故乙采用上述策略时, 总能使得黑板上出现完全平方数, 继而下次乙的操作可使得黑板上的数变为 0 .

解法二 (李逸凡) 乙总能获胜. 假设甲一开始写了数 $n$. 如果某次甲选了偶数 $k$, 则黑板上的数变为平方数, 乙下一轮就能取胜. 故我们假设甲每一轮都取奇数 $k$. 由四平方和定理, 可将 $n$ 写成

$$
n=a^{2}+b^{2}+c^{2}+d^{2} \text {, }
$$

其中 $a \geq b \geq c \geq d$ 是非负整数. 乙将 $n$ 改为 $n-a^{2}=b^{2}+c^{2}+d^{2}=n_{1}$.[^0]若 $b=0$, 则黑板上的数是 0 , 乙获胜.

假设 $b \neq 0$. 甲选了一个奇数 $k$, 则黑板上的数变为

$$
n_{1}^{k}=b^{2} n_{1}^{k-1}+c^{2} n_{1}^{k-1}+d^{2} n_{1}^{k-1}
$$

可表示为三个非负整数的平方和. 接着乙将其减去 $b^{2} n_{1}^{k-1}$, 黑板上的数变为

$$
n_{2}=c^{2} n_{1}^{k-1}+d^{2} n_{1}^{k-1}=C^{2}+D^{2}
$$

可表示为两个非负整数的平方和, 其中 $C=c n_{1}^{\frac{k-1}{2}}, D=d n_{1}^{\frac{k-1}{2}}, C \geq D$. 若 $C=0$, 则乙获胜. 若 $C>0$, 设甲又选取了一个奇数 $l$, 黑板上的数变为

$$
n_{2}^{l}=C^{2} n_{2}^{l-1}+D^{2} n_{2}^{l-1}
$$

仍为两个非负整数的平方和, 此时乙将黑板上的数减去 $C^{2} n_{2}^{l-1}$ 后得到一个平方数(或 0 ). 甲的下一次操作留下的数还是平方数(或 0 ), 乙再下次操作一定获胜.

综上, 乙可以在四次操作之内获胜.

第 2 题 在等腰梯形 $A B C D$ 中, $A B / / D C$. 点 $E$ 是 $A C$ 的中点. 圆 $\Gamma$ 和 $\Omega$ 分别是 $\triangle A B E$ 和 $\triangle C D E$ 的外接圆. 圆 $\Gamma$ 在点 $A$ 处的切线与圆 $\Omega$ 在点 $D$ 处的切线相交于点 $P$. 证明: $P E$ 与圆 $\Omega$ 相切.

证法一 (赵文浩) 如图 1 所示.

![](https://cdn.mathpix.com/cropped/2024_02_26_2bbee96a73cab7b24a76g-2.jpg?height=1045&width=854&top_left_y=1508&top_left_x=607)

图 1
设 $B D$ 中点为 $F, A C$ 与 $B D$ 的交点为 $G$. 由于图形关于 $A B$ 的中垂线对称, 故 $\Gamma, \Omega$ 均过 $F$. 设 $\odot(A G F)$ 与 $\odot(D E G)$ 的另一个交点为 $P^{\prime}$. 由于

$$
\angle P^{\prime} A G=\angle P^{\prime} F D, \quad \angle P^{\prime} D F=\angle P^{\prime} E G=\angle P^{\prime} E A,
$$

以及 $D F=A E$, 可得 $\triangle P^{\prime} F D \cong \triangle P^{\prime} A E$, 于是 $P^{\prime} A=P^{\prime} F, P^{\prime} D=P^{\prime} E$. 从而 $G P^{\prime}$ 平分 $\angle A G F$, 故

$$
\angle P^{\prime} A F=\angle P^{\prime} G F=\frac{1}{2} \angle A G F=\angle A B F
$$

即 $P^{\prime} A$ 与 $\Gamma$ 相切. 类似地可证 $P^{\prime} D$ 与 $\Omega$ 相切, 故 $P=P^{\prime}$. 而 $P D=P E$, 因此 $P E$ 是 $\Omega$ 的另一条切线.

证法二 (杨铮) 设 $B D$ 中点为 $F, A C$ 与 $B D$ 的交点为 $G$. 由于图形关于 $A B$ 的中垂线对称, 故 $\Gamma, \Omega$ 均过 $F$. 设 $A F, D E$ 的中点分别为 $G, H$.

如图 2 所示.

![](https://cdn.mathpix.com/cropped/2024_02_26_2bbee96a73cab7b24a76g-3.jpg?height=1040&width=834&top_left_y=1139&top_left_x=614)

图 2

设 $\Gamma$ 在 $A, F$ 处的切线分别为 $\ell_{1}, \ell_{2}$, 相交于点 $P_{1}$. 则熟知 $P_{1} E$ 是 $\triangle A E F$ 的共轭中线, 即 $E P_{1}$ 与 $E G$ 关于 $\angle A E F$ 的内角平分线对称. 结合 $E G / / C F$, 可知

$$
\angle P_{1} E F=\angle A E G=\angle A C F
$$

故 $P_{1} E$ 与 $\Omega$ 相切.
类似地, 设 $\Omega$ 在 $D, E$ 处的切线分别为 $\ell_{3}, \ell_{4}$, 相交于点 $P_{2}$, 则 $P_{2} F$ 是 $\triangle D F E$ 的共轨中线, 即 $F P_{2}$ 与 $F H$ 关于 $\angle D F E$ 的内角平分线对称. 结合 $F H / / B E$, 可知

$$
\angle P_{2} F E=\angle H F B=180^{\circ}-\angle F B E,
$$

故 $P_{2} F$ 与 $\Gamma$ 相切.

我们证明了直线 $\ell_{1}, \ell_{2}, \ell_{4}$ 共点于 $P_{1}$, 直线 $\ell_{3}, \ell_{4}, \ell_{2}$ 共点于 $P_{2}$, 因此 $\ell_{1}, \ell_{2}, \ell_{3}, \ell_{4}$四线共点, 而 $P$ 是 $\ell_{1}$ 与 $\ell 3$ 的交点, 故 $P=P_{1}=P_{2}$, 且 $P E$ 于 $\Omega$ 相切.

第 3 题 给定正实数 $\varepsilon$. 证明: 除有限个正整数 $n$, 每个具有 $n$ 个顶点及至少 $(1+\varepsilon) n$ 条边的简单图, 都含有两个不同的简单圈, 它们具有相同长度.

注一个简单图由一个顶点集合 $V$ 和一个边集合 $E$ 构成，其中 $E$ 的每个元素都是 $V$ 的一个二元子集. 一个长度为 $k$ 的简单圈是 $E$ 的一个 $k$ 元子集 $C$,其中 $k \geq 3$, 使得存在由 $k$ 个不同的顶点构成的序列 $v_{1}, v_{2}, \cdots, v_{k}$, 满足对每个 $1 \leq i<k,\left\{v_{i}, v_{i+1}\right\}$ 属于 $C$, 且 $\left\{v_{k}, v_{1}\right\}$ 属于 $C$.

证明 假设存在一个具有 $n$ 个顶点及至少 $(1+\varepsilon) n$ 条边的简单图 $G, G$ 的所有简单圈都具有不同的长度, 我们证明这样的 $n$ 有一个上界, 从而对所有充分大的 $n$, 题中结论均成立.

设 $G$ 共有 $x$ 个简单圈. 由于简单圈的长度不小于 3 且不大于 $n$, 且 $G$ 的简单圈都具有不同长度, 故 $x \leq n-2$.

另一方面, 在 $G$ 的每个连通分支上取一个生成树, 这些生成树合在一起构成 $G$ 的一个生成森林 $F$. 设 $F$ 中的边构成集合 $E_{1}$, 令 $E \backslash E_{1}=E_{2}$.

易知 $\left|E_{1}\right| \leq n-1$, 故 $\left|E_{2}\right| \geq \varepsilon n+1$.

对每条边 $e \in E_{2}$, 在 $F$ 上添加边 $e$ 后得到的图有唯一的简单圈, 这个简单圈记为 $C_{e} . C_{e}$ 在 $E_{1}$ 中有 $\left|C_{e}\right|-1$ 条边, 因此在重复计算下, 所有 $C_{e}$ 共包含 $E_{1}$ 中 $\sum_{e \in E_{2}}\left(\left|C_{e}\right|-1\right)$ 条边. 又由 $G$ 的假设, 对不同的 $e, C_{e}$ 的长度互不相同, 故

$$
\begin{aligned}
& \sum_{e \in E_{2}}\left(\left|C_{e}\right|-1\right) \geq 2+3+\cdots+\left(\left|E_{2}\right|+1\right) \\
= & \frac{1}{2}\left(\left|E_{2}\right|+1\right)\left(\left|E_{2}\right|+2\right)-1 \\
\geq & \frac{1}{2}(\varepsilon n+2)(\varepsilon n+3)-1 \\
\geq & \frac{1}{2} \varepsilon^{2} n^{2}
\end{aligned}
$$

由平均值原理, 存在 $f \in E_{1}$, 至少出现在 $\frac{1}{\left|E_{1}\right|} \cdot \frac{1}{2} \varepsilon^{2} n^{2} \geq \frac{1}{2} \varepsilon^{2} n$ 个 $C_{e}$ 上.
设 $e_{1}, e_{2}, \cdots, e_{s}$ 是 $E_{2}$ 中的不同边, $s \geq \frac{1}{2} \varepsilon^{2} n$, 使得 $f \in C_{e_{i}}, 1 \leq i \leq s$.

对 $1 \leq i<j \leq s$, 考察圈 $C_{e_{i}}, C_{e_{j}}$, 它们有公共边 $f$, 在这两个圈的并集中, 存在一个简单圈 $C \subset\left(C_{e_{i}} \cup C_{e_{j}}\right), C$ 不含 $f$. 事实上 $C$ 是唯一的, 因为 $F+e_{i}+e_{j}-f$ 中恰有一个简单圈, 删去这个圈上的任意一条边后又成为一个生成森林. 将这个 $C$ 记为 $C\left(e_{i}, e_{j}\right)$. 显然 $e_{i}, e_{j} \in C\left(e_{i}, e_{j}\right)$, 故对不同的 $1 \leq i<j \leq s, C\left(e_{i}, e_{j}\right)$ 互不相同, 且不同于 $C_{e_{i}}$, 故

$$
x \geq\left(\begin{array}{l}
s \\
2
\end{array}\right)+s \geq \frac{1}{2} s^{2} \geq \frac{1}{8} \varepsilon^{4} n^{2} .
$$

结合 $x \leq n-2<n$, 可知 $n<\frac{8}{\varepsilon^{4}}$. 故对 $n \geq \frac{8}{\varepsilon^{4}}$, 题中结论成立.

第 4 题 证明: 对任意正整数 $n$, 均存在一个(未必凸的)多边形, 其任意三个顶点不共线, 且恰有 $n$ 种方式作三角剖分.

注 多边形的三角剖分是指用一些在内部互不相交的多边形内部对角线将这个多边形分割为三角形。

证明 (傅增) 三角形恰有一种三角剖分.下面假设 $n \geq 2$. 作多边形

$$
P=A_{1} A_{2} \cdots A_{n} B C
$$

其中 $A_{i}=\left(i, i^{2}\right), i=1,2, \cdots, n, B=(n,-M), C=(1,-M)$, 其中 $M>0$ 足够大, 使得 $B A_{1}$ 与 $C A_{n}$ 均为内部对角线.

对 $P$ 作三角剖分, 有唯一一个三角形以 $B C$ 为边, 故选取某个 $A_{i}(1 \leq i \leq$ $n)$, 作三角形 $B C A_{i}$. 对剩下两个多边形 $(i=1$ 或 $i=n$ 时只剩下一个多边形 $)$ $C A_{1} \cdots A_{i}$ 和 $B A_{i} \cdots A_{n}$ 继续作三角剖分都只有唯一的方法, 因为内部对角线只有 $C A_{2}, \cdots, C A_{i-1}$ 和 $B A_{i+1}, \cdots, B A_{n-1}$, 将这些对角线全部连出后, 我们得到了 $P$ 的三角剖分. 故多边形 $P$ 恰有 $n$ 种三角剖分.

第 5 题 确定所有函数 $f: \mathbb{R} \rightarrow \mathbb{R}$, 满足对任意实数 $x, y$, 都有

$$
f(x+y f(x))+f(x y)=f(x)+f(2019 y) .
$$

解 (金及凯) 将题中条件记为 $P(x, y)$. 由 $P(2019, y)$ 可得

$$
f(2019+f(2019) y)=f(2019) \text {. }
$$

若 $f(2019) \neq 0$, 则当 $y$ 取遍所有实数时, $2019+f(2019) y$ 也取遍所有实数, 故由 (1) 知, $f$ 为常值函数.

以下假设 $f(2019)=0$, 且 $f$ 不是常值函数. 由 $P(x, 1)$ 可得

$$
f(x+f(x))=0 .
$$

情形 1: 仅当 $x=2019$ 时 $f(x)=0$. 由 (2) 可知 $x+f(x)=2019$, 此时 $f(x)=2019-x$.

情形 2: 存在 $x_{0} \neq 2019$, 使得 $f\left(x_{0}\right)=0$. 由 $P\left(x_{0}, y\right)$ 可得

$$
f\left(x_{0} y\right)=f(2019 y) .
$$

在 (3) 中用 $\frac{x}{2019}$ 替换 $y$, 得

$$
f(x)=f(k x),
$$

这里 $k=\frac{x_{0}}{2019} \neq 1$. 由 $P(k x, y)$ 以及 (4) 可得

$$
f(k x+y f(x))+f(x y)=f(x)+f(2019 y) .
$$

与 $P(x, y)$ 比较, 可知

$$
f(k x+y f(x))=f(x+y f(x)) .
$$

设 $u, v$ 是任意实数, 考虑方程组

$$
\left\{\begin{array}{l}
k x+y f(x)=u \\
x+y f(x)=v
\end{array}\right.
$$

当 $f\left(\frac{u-v}{k-1}\right) \neq 0$ 时, 可解得 $x=\frac{u-v}{k-1}$ 以及 $y$, 从而由 (6) 得 $f(u)=f(v)$.

由于 $f$ 不是常数, 故存在一个实数 $a$, 使得 $f\left(\frac{a}{k-1}\right) \neq 0$. 若这样的 $a$ 只有 $a=0$, 则当 $x \neq 0$ 时均有 $f(x)=0$, 而 $f(0) \neq 0$. 下面考虑有 $a \neq 0$, 使得 $f\left(\frac{a}{k-1}\right) \neq 0$, 那么当 $u-v=a$ 时, $f(u)=f(v)$, 即 $f$ 以 $a$ 为周期, $f(x+a)=f(x)$.由 $P(x+a, y)$ 并利用 $f$ 的周期性可得

$$
f(x+y f(x))+f((x+a) y)=f(x)+f(2019 y) \text {. }
$$

与 $P(x, y)$ 比较可知

$$
f((x+a) y)=f(x y) .
$$

对任意 $u, v \in \mathbb{R}, u \neq v$, 在 (7) 中令 $y=\frac{u-v}{a}, x=\frac{a v}{u-v}$ 可得 $f(u)=f(v)$, 从而 $f$ 是常值函数, 而我们假设 $f$ 不是常值函数, 故这一情形不成立, 即只有 $f(0) \neq 0$.

综上所述, 满足条件的函数有以下三类: $f(x)=c$ 常值, $f(x)=2019-x$,以及

$$
f(x)= \begin{cases}0, & x \neq 0 \\ c \neq 0, & x=0\end{cases}
$$

容易验证, 上述三类函数满足要求.
第 6 题 求所有整数对 $(c, d), c, d$ 均大于 1 , 且具有下述性质:

对任意一个 $d$ 次首一整系数多项式 $Q$, 以及任意一个素数 $p>c(2 c+1)$, 均存在一个元素个数不超过 $\left(\frac{2 c-1}{2 c+1}\right) p$ 的整数集合 $S$, 使得集合

$$
\bigcup_{s \in S}\{s, Q(s), Q(Q(s)), Q(Q(Q(s))), \cdots\}
$$

含有模 $p$ 的完全剩余系.

解 (李逸凡) $(c, d)$ 满足要求当且仅当 $d \leq c$.

对多项式 $Q$ 以及素数 $p$, 构造有向图 $G=G(Q, p)$, 其顶点集为 $V=$ $\{0,1, \cdots, p-1\}$, 对 $i, j \in V($ 可以 $i=j)$, 当且仅当 $Q(i) \equiv j(\bmod p)$ 时引入一条有向边 $i \rightarrow j$. 不妨假设 $S \subset V, S$ 满足题中结论当且仅当对每个 $t \in V$, 存在 $s \in S$, 使得在 $G$ 中有从 $s$ 到 $t$ 的有向路(或 $s=t$ ).

这个图具有这样一些性质：每个顶点处恰有一条出边. 由 Lagrange 定理, $d$ 次同余方程 $Q(x) \equiv a(\bmod p)$ 至多只有 $d$ 个解, 故每个顶点处至多有 $d$ 条入边. 考虑一个弱连通分支(即不考虑边的方向的无向图中的连通分支), 在这个连通分支上由于每个顶点恰有一条出边, 故恰有一个有向圈 $C$, 每个 $C$ 之外的顶点都有唯一的有向路径到达 $C$ 上的顶点.

如果一个弱连通分支仅是一个圈, 则在这个圈上至少取一个顶点, 其余顶点都可由这个顶点沿有向路径到达. 如果一个弱连通分支上除有向圈外还有其他顶点, 则必须也仅需取其中所有入度为 0 的那些顶点, 则其余顶点也都可由这些顶点出发经过有向路径到达. 设 $G$ 中有 $k$ 个弱连通分支为有向圈, 另有 $l$ 个入度为 0 的顶点, 则可选取(也至少需要选取) $k+l$ 个顶点构成集合 $S$, 使得满足条件.

若 $d \geq c+1$, 取大素数 $p \equiv 1(\bmod d)$, 以及多项式 $Q(X)=X^{d}$. 由于 $X^{d}$ 模 $p$ 恰有 $1+\frac{p-1}{d}$ 个不同值, 其中顶点 0 处是环边且是单独的一个弱连通分支, 故 $k \geq 1, l \geq \frac{d-1}{d}(p-1)$, 此时

$$
|S| \geq t+k \geq 1+\frac{d-1}{d}(p-1) \geq 1+\frac{c}{c+1}(p-1)>\left(\frac{2 c-1}{2 c+1}\right) p,
$$

故 $d \geq c+1$ 不满足要求.

若 $2 \leq d \leq c$, 设 $G$ 中有 $k_{i}$ 个弱连通分支恰是长度为 $i$ 的有向圈, $i=$ $1,2, \cdots, n$, 另外还有不是单个有向圈的弱连通分支 $G_{1}, G_{2}, \cdots, G_{m}$, 分别有 $n_{i}$ 个顶点和 $v_{i}$ 个无入边的顶点, $1 \leq i \leq m$. 由于 $Q(X) \equiv X(\bmod p)$ 至多只有 $d$ 个解, 故 $k_{1} \leq d$. 每个 $G_{i}$, 由于在 $n_{i}-v_{i}$ 个有入边的顶点处入度总和为 $v_{i}$,而每个顶点处至多 $d$ 条入边, 故 $d\left(n_{i}-v_{i}\right) \geq n_{i}$, 即 $v_{i} \leq \frac{d-1}{d} n_{i}$.
我们选取元素个数最小的满足条件的顶点集合 $S$, 则

$$
\begin{aligned}
|S| & =\sum_{i=1}^{n} k_{i}+\sum_{i=1}^{m} v_{i} \leq k_{1}+\frac{d-1}{d} \sum_{i=2}^{n} i k_{i}+\sum_{i=1}^{m} \frac{d-1}{d} n_{i} \\
& \leq k_{1}+\frac{d-1}{d}\left(\sum_{i=2}^{n} i k_{i}+\sum_{i=1}^{m} n_{i}\right) \\
& =k_{1}+\frac{d-1}{d}\left(p-k_{1}\right)=\frac{d-1}{d} p+\frac{k_{1}}{d} \leq 1+\left(\frac{d-1}{d}\right) p \\
& \leq 1+\left(\frac{c-1}{c}\right) p \leq\left(\frac{2 c-1}{2 c+1}\right) p
\end{aligned}
$$

最后一个不等式等价于 $p \geq c(2 c+1)$. 因此当 $2 \leq d \leq c$ 时满足要求.


[^0]:    收稿日期: 2019-03-08.

